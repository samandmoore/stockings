<h1>Ticker <%= @ticker.name %></h1>

<div class="chartContainer" style="width:400px;height:200px;position:relative;"></div>
<div class="sentiment">
    Sentiment: <%= @ticker.sentiment %>
</div>
<div class="consumer-wallstreet">
    Consumer vs Wallstreet ratio <%= @ticker.crowd_v_street %>
</div>


<%= link_to "Add", match_entry_ticker_path(@match, @entry, @ticker_param_name, ticker: { id: @ticker.id }), method: :put %>

<script type="text/javascript">

$(document).ready(function() {

    var stxx = new STXChart({container: $$$(".chartContainer"), 
        layout: { chartType: "colored_line" },
        preferences: { whitespace: 1, magnet: true, labels: false}});
    stxx.chart.xAxis.displayGridLines=false;
    stxx.chart.yAxis.displayGridLines=false;
    stxx.chart.yAxis.noDraw=true;
    stxx.chart.xAxis.noDraw=true;
    stxx.chart.yAxis.drawCurrentPriceLabel=false;
    stxx.preferences.labels=false


    stxx.newChart("<%= @ticker.symbol %>", <%= raw @ticker.chart_data.to_json %>);

});

</script>